#!/usr/bin/bash
# git gud
# check if i'm just in my home dir and use yadm
if [[ "$PWD" == "$HOME" ]] ; then
    yadm pull --no-recurse-submodules
    yadm add -u
    yadm status
    if [[ "$1" ]] ; then
        echo '/// fr? ///'
        read -r
        yadm commit -m "$*"
        yadm push
        return
    fi
    echo "/// add a commit message ///"
    read -r message
    yadm commit -m "$message"
    yadm push
    return
fi
git pull --no-recurse-submodules
git add -A
git status
if [[ "$1" ]] ; then
    echo '/// continue? ///'
    if git status | grep -q main ; then
        echo '/// and you'\''re on main you nincompoop ///'
    fi
    read -r
    git commit -m "$*"
    git push
    return
fi
echo '/// so help me god if you put something lazy ///'
if git status | grep -q main ; then
    echo '/// and you'\''re on main you nincompoop ///'
fi
read -r message
git commit -m "$message"
git push
